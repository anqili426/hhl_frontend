// Not sure about the spec translation
method smith(secret: Int, test: Int) returns (res: Int)
requires forall _s1: State :: <_s1>  ==>
             (exists _s2: State :: <_s2> && _s2[secret] != _s1[secret])
ensures forall _s1: State :: <_s1>  ==>
    (exists _s2: State :: <_s2> && (_s1[res] == _s2[res]) && _s2[secret] != _s1[secret])
{
   // why should this be invalid...?
    if (secret % 2 == 0) {
        res := 0
    } else {
        res := 1
    }
}